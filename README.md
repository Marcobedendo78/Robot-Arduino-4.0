<div align="center">
  <img height="150" src="https://github.com/user-attachments/assets/ed07248b-e39b-4969-bd0f-9576c6b1846f"  />
</div>

###

<div align="center">
  <a href="www.youtube.com/@Focus978" target="_blank">
    <img src="https://img.shields.io/static/v1?message=Youtube&logo=youtube&label=&color=FF0000&logoColor=white&labelColor=&style=for-the-badge" height="25" alt="youtube logo"  />
  </a>
  <a href="	marcobedendo78@gmail.com" target="_blank">
    <img src="https://img.shields.io/static/v1?message=Gmail&logo=gmail&label=&color=D14836&logoColor=white&labelColor=&style=for-the-badge" height="25" alt="gmail logo"  />
  </a>
</div>

###

<h1 align="center">hey there ğŸ‘‹</h1>

###

<h3 align="left">ğŸ‘©â€ğŸ’»  About Me</h3>

###

<h1 align="left">Bedendo Marco</h1>

###

<p align="left">Vivo in italia<br><br>- ğŸ”­ Lavoro come programmatore CAM<br>- âš¡ Nel tempo libero Progetto ogni cosa che mi puÃ² servire e la realizzo con la stampa 3d</p>

###

<p align="left">Progetto le mia parti tramite Fusion 360 e stampo i pezzi con la mia stampante 3d Bambulab X1C</p>

###

<h3 align="left">ğŸ›  Tools</h3>

###

<div align="left">
  <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/arduino/arduino-original.svg" height="40" alt="arduino logo"  />
  <img width="12" />
  <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg" height="40" alt="vscode logo"  />
</div>

###
# ğŸ¤– Robot Tagliaerba Arduino 4.0

Questo Ã¨ un progetto di un robot tagliaerba autonomo, basato su **Arduino Mega** come unitÃ  centrale di controllo, con vari microcontrollori e moduli per la gestione della navigazione, sensori, alimentazione e connettivitÃ  Wi-Fi tramite MQTT.

## ğŸ“¦ Componenti Elettronici

| Componente | Link | Q.tÃ  | Prezzo unitario | Totale | Note |
|-----------|------|------|------------------|--------|------|
| Arduino Mega 2560 R3 | [Amazon](https://www.amazon.it/dp/B071W7WP35) | 1 | â‚¬25.99 | â‚¬25.99 | UnitÃ  principale |
| Arduino Nano | [Amazon](https://www.amazon.it/dp/B01LWSJBTD) | 1 | â‚¬11.99 | â‚¬11.99 | Telemetria batteria e sensori |
| NodeMCU ESP8266 | [Amazon](https://www.amazon.it/dp/B06Y1ZPNMS) | 1 | â‚¬9.99 | â‚¬9.99 | Wi-Fi MQTT |
| Arduino UNO R3 | [Amazon](https://www.amazon.it/dp/B0C1V3QT9T) | 1 | â‚¬14.99 | â‚¬14.99 | Generatore filo perimetrale |
| Display 16x2 I2C | [Amazon](https://www.amazon.it/dp/B07CQG6CMT) | 1 | â‚¬7.64 | â‚¬7.64 | Visualizzazione info |
| Sensore ultrasuoni JSN-SR04T | [Amazon](https://www.amazon.it/dp/B0CLS8B5LH) | 2 | â‚¬9.99 | â‚¬19.98 | Ostacoli |
| Sensore magnetico Reed NO | [Mouser](https://www.mouser.it/ProductDetail/934-59165-1-U-00-A) | 2 | â‚¬1.42 | â‚¬2.84 | Limiti corsa |
| Driver BTS7960 43A | [Amazon](https://www.amazon.it/dp/B0CZDQRB5C) | 3 | â‚¬9.99 | â‚¬29.97 | Motori ruote e lama |
| Driver L298 | [Amazon](https://www.amazon.it/dp/B07DK6Q8F9) | 2 | â‚¬6.99 | â‚¬13.98 | Attuatori secondari |
| Sensori corrente ACS712 | [Amazon](https://www.amazon.it/dp/B07CMXFS13) | 2 | â‚¬10.99 | â‚¬21.98 | Monitoraggio motori |
| Sensore tensione DC 2-25V | [Amazon](https://www.amazon.it/dp/B07RFJYSM4) | 1 | â‚¬7.99 | â‚¬7.99 | Batteria |
| Sensore pioggia / acqua | [Amazon](https://www.amazon.it/dp/B06XQ496SW) | 1 | â‚¬7.99 | â‚¬7.99 | Sicurezza ambientale |
| Orologio DS1302 RTC | [Amazon](https://www.amazon.it/dp/B0D8Q8BMH6) | 1 | â‚¬6.01 | â‚¬6.01 | Scheduling |
| Gy-271 HMC5883L | [Amazon](https://www.amazon.it/dp/B0CR98JLQL) | 1 | â‚¬8.48 | â‚¬8.48 | Bussola digitale |
| Modulo relÃ¨ 1 canale | [Amazon](https://www.amazon.it/dp/B07V1YQQGL) | 1 | â‚¬6.99 | â‚¬6.99 | Comandi remoti |
| Buck LM2596 | [Amazon](https://www.amazon.it/dp/B07MY2NTFV) | 2 | â‚¬9.59 | â‚¬19.18 | Regolazione tensione |
| Step down 300W | [Amazon](https://www.amazon.it/dp/B07VRD5GZG) | 1 | â‚¬8.99 | â‚¬8.99 | Motori lama |
| BMS 4S 30A | [Amazon](https://www.amazon.it/dp/B09DYD4GVN) | 1 | â‚¬8.99 | â‚¬8.99 | Gestione batteria |
| Bilanciatore attivo 4S 5A | [Amazon](https://www.amazon.it/dp/B0B7CW6BRC) | 1 | â‚¬17.18 | â‚¬17.18 | Bilanciamento celle |
| Batteria LiPo 4S 6200mAh 80C | [Amazon](https://www.amazon.it/dp/B0CB6HTW7S) | 1 | â‚¬46.99 | â‚¬46.99 | Alimentazione principale |
| Motore Micromotors 22/20 RPM | [CSElettronica](https://www.cselettronica.net/default.asp?cmd=getProd&cmdID=20156) | 2 | â‚¬36.70 | â‚¬73.40 | Motori trazione |
| Motore lama 12V 30W | [Amazon](https://www.amazon.it/dp/B076M53HC9) | 1 | â‚¬27.79 | â‚¬27.79 | Rotore taglio |
| Ventole 40x40x10 24V | [Amazon](https://www.amazon.it/dp/B07WJGHTCF) | 2 | â‚¬8.99 | â‚¬17.98 | Raffreddamento |
| Alimentatore Mean Well 150W 24V | [Leroy Merlin](https://www.leroymerlin.it/prodotti/alimentatore-trasformatore-mean-well-150w-24v-6-25a-xlg-150-24-a-ip67-impermeabile-89756671.html) | 1 | â‚¬39.50 | â‚¬39.50 | Base ricarica |
| Scheda madre robot personalizzata | [MakerWorld](https://makerworld.com/it/models/420276-arduino-robot-lawnmower-robot-tagliaerba-arduino#profileId-323001) | 1 | â‚¬25.00 | â‚¬25.00 | Prodotta da Marco |

**Totale stimato**: **â‚¬497,21** (solo elettronica, escluso meccanica e struttura)

## ğŸ”§ Architettura generale

- ğŸ§  **Arduino Mega**: logica principale, gestione motori e ultrasuoni
- ğŸ“¶ **ESP8266**: comunicazione MQTT per comandi e telemetria
- ğŸ”‹ **Arduino Nano**: monitoraggio batteria, pioggia, correnti
- ğŸ”„ **Arduino Uno**: generazione segnale filo perimetrale
- ğŸ“Ÿ Display I2C: messaggi e stato
- âš¡ Alimentazione a 24V con step-down e BMS per la batteria 4S

## ğŸ› ï¸ Stato

Il robot Ã¨ in fase avanzata di sviluppo. Il codice Ã¨ disponibile nella directory principale del [repository](https://github.com/Marcobedendo78/Robot-Arduino-4.0), insieme allo schema dei moduli collegati.

---

## ğŸ“« Contatti

Per domande o suggerimenti puoi aprire una issue o contattare direttamente [Marco](https://github.com/Marcobedendo78).

## ğŸ†• Aggiornamenti Maggio 2025

### âœ… Integrazione NodeMCU con Home Assistant
- Il firmware `NODEMCU_MQTT_v2` consente la comunicazione MQTT tra il robot e Home Assistant.
- Le funzioni `TX_Functions.ino` e `Rx_Functions.ino` gestiscono lâ€™invio e la ricezione dei comandi.

### âœ… Controllo PID con Bussola
- Ãˆ stato aggiunto un sistema PID per mantenere la direzione di marcia del robot in modo preciso.
- Nuova funzione: `Controllo_PID_Bussola(headingAttuale)`, integrata nelle manovre di taglio.
- La direzione target (`targetHeading`) viene aggiornata dopo ogni manovra.

### âœ… Migliorata lettura della bussola
- Ottimizzata la funzione `Get_Compass_Reading()` per maggiore stabilitÃ  e precisione.
- Ridotto il rumore con filtraggi e controlli aggiuntivi.

### âœ… Menu per modificare i valori PID da display
- Aggiunto nuovo menu interattivo per modificare i parametri `Kp`, `Ki`, `Kd` tramite pulsanti a membrana.
- I valori vengono salvati in EEPROM.


---

> Queste modifiche migliorano la stabilitÃ , la precisione e l'integrazione domotica del robot rasaerba.

## âš™ï¸ Configurazione MQTT

Il file `robot_arduino.yaml` include tutti i sensori e i comandi MQTT utilizzati da Home Assistant per interagire con il robot.

ğŸ“„ [Visualizza il file robot_arduino.yaml](./robot_arduino.yaml)

Per integrarlo in Home Assistant:

```yaml
mqtt: !include robot_arduino.yaml
```

---

## ğŸ–¥ï¸ Dashboard Home Assistant â€“ Controllo Robot

Puoi controllare il robot tagliaerba direttamente da Home Assistant usando la dashboard interattiva inclusa nel file `robot_card.yaml`.

ğŸ“„ [Visualizza il file robot_card.yaml](./interface/robot_card.yaml)

### âœ… Requisiti

- Home Assistant configurato con MQTT
- Plugin [button-card](https://github.com/custom-cards/button-card) installato via HACS

### ğŸ§­ Come usarla

1. Vai su **Impostazioni â†’ Dashboard â†’ Modifica dashboard**
2. Clicca su **Aggiungi scheda â†’ Scheda Manuale**
3. Incolla tutto il contenuto del file `robot_card.yaml`
4. Salva!

### ğŸ•¹ï¸ FunzionalitÃ  della dashboard

- Avvio e stop del robot
- Uscita e rientro nella base
- ModalitÃ  automatica/manuale
- Comandi direzionali: avanti, indietro, sinistra, destra
- Pulsanti colorati con icone intuitive

## ğŸ“¡ MQTT Topics utilizzati

| Tipo         | Topic                                | Descrizione                     |
|--------------|---------------------------------------|----------------------------------|
| Stato batteria | `home/robot/mower/status/battery`    | Tensione in Volt                |
| Parcheggio     | `home/robot/mower/status/parked`     | Parcheggiato o OFF              |
| Taglio attivo  | `home/robot/mower/status/running`    | Stato taglio attivo             |
| Carica         | `home/robot/mower/status/charge`     | In carica o OFF                 |
| Comandi        | `home/robot/mower/control`           | Avvio, stop, movimento, ecc.    |

## ğŸ“¡ Integrazione con Home Assistant

### ğŸ§  Configurazione Sensori MQTT

Ãˆ disponibile un file di configurazione `robot_arduino.yaml` che definisce tutti i sensori MQTT e i comandi per il controllo del robot tramite Home Assistant.

ğŸ“„ [Visualizza il file `robot_arduino.yaml`](./robot_arduino.yaml)

Per integrarlo nel tuo Home Assistant, aggiungi questa riga al tuo `configuration.yaml`:

```yaml
mqtt: !include robot_arduino.yaml
```

Il file include sensori per:
- Tensione batteria
- Stato taglio, parcheggio, docking
- Carica in corso
- Tracciamento del filo perimetrale

E switch per:
- Avvia/stoppa il robot
- ModalitÃ  manuale/automatica
- Controlli direzionali manuali (avanti, indietro, destra, sinistra, stop)

---

Per suggerimenti o problemi con l'integrazione MQTT, sentiti libero di aprire una issue sul repository!

## ğŸ“¡ Nuove Modifiche Disponibili!  

ğŸš€ Queste novitÃ  sono utilizzabili **a partire dalla variante Mega_1_8** del progetto.  
ğŸ“‚ Istruzioni dettagliate nel file: **Upgrade_necessaria_da_versione_mega1.8**  

### ğŸ”§ Hardware & Software
- ğŸ”§ **Doppio sensore filo perimetrale** â†’ tracciatura molto piÃ¹ precisa e stabile  
- âš¡ **CompatibilitÃ  con batterie LiPo 8S** â†’ maggiore autonomia e potenza a disposizione

